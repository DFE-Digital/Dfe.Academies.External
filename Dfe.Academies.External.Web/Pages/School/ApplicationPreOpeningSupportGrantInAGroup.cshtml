@page
@using Dfe.Academies.External.Web.Enums
@using Dfe.Academies.External.Web.Extensions
@using Microsoft.AspNetCore.Mvc.TagHelpers
@model Dfe.Academies.External.Web.Pages.School.ApplicationPreOpeningSupportGrantInAGroupModel
@{
    ViewData["Title"] = "Apply to become an academy - pre-opening support grant";
}

@section BeforeMain
{
    <a asp-page="ApplicationPreOpeningSupportGrantSummary" asp-route-appId="@Model.ApplicationId" asp-route-urn="@Model.Urn" class="govuk-back-link">Back</a>
}

<div class="govuk-grid-column-two-thirds">
    <span class="govuk-caption-l">
        Pre-opening support grant
    </span>
    <form method="post" name="frmApplicationPreOpeningSupportGrant" novalidate="">
        @Html.AntiForgeryToken()
        <input type="hidden" asp-for="Urn" />
        <input type="hidden" asp-for="ApplicationId" />
        <input type="hidden" asp-for="ApplicationType" />
        <partial name="_HiddenFields" />
        <div class="govuk-form-group @(!ViewData.ModelState.IsValid ? "govuk-form-group--error" : "")">
            <fieldset class="govuk-fieldset" aria-describedby="changedName-hint">
                <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
                    <h1 class="govuk-fieldset__heading">
                        Will you join the trust in a group of 3 or more?
                    </h1>
                </legend>
                <div id="joinInAGroupOption-hint" class="govuk-hint">
                    A school must join a trust with at least 2 other converting schools ore transferring academies to be eligible for the pre-opening support grant.
                </div>
                <p id="joinInAGroupOption-error" class="govuk-error-message @(!ViewData.ModelState.IsValid ? "govuk-visually-hidden" : "")">
                    <partial name="_ValidationSummary" model="Model.ValidationErrorMessagesViewModel" />
                </p>
                <div class="govuk-radios govuk-radios--inline" data-module="govuk-radios">
                    @foreach (var joinInAGroupOption in Enum.GetValues(typeof(SelectOption)).OfType<SelectOption>().OrderByDescending(x => x.ToString()))
                    {
                        <div class="govuk-radios__item">
                            <input type="radio"
                                   asp-for="JoinInAGroup"
                                   value="@Convert.ToInt32(joinInAGroupOption)"
                                   id="joinInAGroupOption@(joinInAGroupOption)"
                                   class="govuk-radios__input"
                                   data-aria-controls="joinInAGroupOption-@(joinInAGroupOption.ToString().ToLower())"
                                   checked="@(joinInAGroupOption.Equals(Model.JoinInAGroup))" />
                            <label for="joinInAGroupOption@(joinInAGroupOption)" class="govuk-label govuk-radios__label">
                                @joinInAGroupOption.GetDescription()
                            </label>
                        </div>
                    }
                </div>
            </fieldset>
        </div>
        <br />
        <input type="submit" value="Save and continue" class="govuk-button govuk-!-margin-top-2 govuk-!-margin-bottom-8" />
    </form>
</div>