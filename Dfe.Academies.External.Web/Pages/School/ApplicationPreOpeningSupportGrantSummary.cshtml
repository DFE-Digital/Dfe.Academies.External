@page
@using Dfe.Academies.External.Web.Enums
@using Dfe.Academies.External.Web.ViewModels
@using Microsoft.AspNetCore.Mvc.TagHelpers
@model Dfe.Academies.External.Web.Pages.School.ApplicationPreOpeningSupportGrantSummaryModel
@{
	ViewData["Title"] = "Apply to become an academy - About the conversion";
}

@section BeforeMain
{
	<partial name="Shared/_BackLink" model='new BackViewModel { ApplicationId = Model.ApplicationId, SchoolURN = Model.Urn, ApplicationType = Model.ApplicationType }'/>
}

<div class="govuk-grid-column-two-thirds">
	<span class="govuk-caption-l">
		@Model.SchoolName
	</span>
	<h1 class="govuk-heading-l">
		Pre-opening support grant
	</h1>

	@foreach (var question in Model.ViewModel)
    {
        <table class="govuk-table">
		    <tbody class="govuk-table__body">
			    <tr class="govuk-table__row">
				    <td class="govuk-table__cell">
					    @if (question.Status == SchoolConversionComponentStatus.NotStarted)
					    {
						    <a asp-page="@question.URI" class="govuk-button govuk-button--secondary"
						       asp-route-appId="@Model.ApplicationId"
						       asp-route-urn="@Model.Urn">
							    Start section
						    </a>
					    }
					    else
					    {
						    <a asp-page="@question.URI" class="govuk-link"
						       asp-route-appId="@Model.ApplicationId"
						       asp-route-urn="@Model.Urn">
							    Change your answers
						    </a>
					    }
				    </td>
				    <td class="govuk-table__cell"></td>
			    </tr>
			    @foreach (var conversionComponent in question.Sections)
			    {
				    <partial name="_SchoolConversionComponentPartial" model="@conversionComponent"/>
			    }
		    </tbody>
	    </table>
        <div class="govuk-!-margin-6"></div>
    }

    <partial name="Shared/_BackButton" model='new BackViewModel { ApplicationId = Model.ApplicationId, SchoolURN = Model.Urn, ApplicationType = Model.ApplicationType }'/>
</div>
<input type="hidden" asp-for="Urn" />
