@page
@model Dfe.Academies.External.Web.Pages.HomeModel
@{
    ViewData["Title"] = "Apply to become an academy - Your applications";
}

<div class="govuk-grid-column-two-thirds">

    @{
        if (Model.ExistingApplications.Count > 0)
        {

            <h1 class="govuk-heading-xl">Your applications</h1>

            <div class="govuk-!-margin-6"></div>

            <h2 class="govuk-heading-m">Applications in progress (@Model.ExistingApplications.Count)</h2>

            <div class="govuk-!-margin-6"></div>

            <table class="govuk-table">
                <thead class="govuk-table__head">
                    <tr class="govuk-table__row">
                        <th scope="col" class="govuk-table__header">Application</th>
                        <th scope="col" class="govuk-table__header">School Name</th>
                        <th scope="col" class="govuk-table__header">School Or Schools Applying To Convert</th>
                    </tr>
                </thead>
                <tbody class="govuk-table__body">
                    @if(Model.ExistingApplications.Count > 0)
                    {
                        @foreach (var data in Model.ExistingApplications)
                        {
                            <tr class="govuk-table__row">
                                <th scope="row" class="govuk-table__cell"><a href="#">@data.Application</a></th>
                                <td class="govuk-table__cell">@data.TrustName</td>
                                <td class="govuk-table__cell">
                                    @foreach (var schs in data.SchoolOrSchoolsApplyingToConvert)
                                    {
                                        <ul><li>@Html.Raw(@schs.SchoolOrSchoolsApplyingToConvertProperty)</li></ul>
                                    }
                                </td>
                            </tr>
                        }
                    }

                </tbody>
            </table>
        }
    }
    <p>
        <a asp-page="WhatAreYouApplyingToDo" class="govuk-button govuk-button--start govuk-!-margin-top-2 govuk-!-margin-bottom-8">
            Start a new application
        </a>
    </p>

    <div class="govuk-!-margin-6"></div>

    @{
        if (Model.CompletedApplications.Count > 0)
        {
            <h2 class="govuk-heading-m">Past applications (@Model.CompletedApplications.Count)</h2>

            <table class="govuk-table">
                <thead class="govuk-table__head">
                    <tr class="govuk-table__row">
                        <th scope="col" class="govuk-table__header">Application</th>
                        <th scope="col" class="govuk-table__header">School Name</th>
                        <th scope="col" class="govuk-table__header">School Or Schools Applying To Convert</th>
                    </tr>
                </thead>
                <tbody class="govuk-table__body">
                    @if(Model.CompletedApplications.Count > 0)
                    {
                        @foreach (var data in Model.CompletedApplications)
                        {
                            <tr class="govuk-table__row">
                                <th scope="row" class="govuk-table__cell"><a href="#">@data.Application</a></th>
                                <td class="govuk-table__cell">@data.TrustName</td>
                                <td class="govuk-table__cell">
                                    @foreach (var schs in data.SchoolOrSchoolsApplyingToConvert)
                                    {
                                        <ul><li>@Html.Raw(@schs.SchoolOrSchoolsApplyingToConvertProperty)</li></ul>
                                    }
                                </td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
        }
    }
</div>
